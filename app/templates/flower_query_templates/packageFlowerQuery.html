{% extends "main_base.html" %}
{% block title %}套餐流量查询{% endblock %}
{% block head %}
{{ super() }}
<meta http-equiv="content-type" content="text/html; charset=utf-8">
<link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/css/select2.min.css" rel="stylesheet" type="text/css">
<!--link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker3.min.css"
      rel="stylesheet" type="text/css" -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/2.1.25/daterangepicker.min.css"
      rel="stylesheet" type="text/css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/css/jasny-bootstrap.min.css"
      rel="stylesheet" type="text/css">
<link href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.7.0/chosen.min.css" rel="stylesheet" type="text/css">
{% assets "jqwidgets_globle_css" %}
<link rel="stylesheet" type="text/css" href="{{ ASSET_URL }}">
{% endassets %}
{% endblock %}

{% block modal %}
<!-- delete Modal -->
<div class="modal fade" id="id-package-flower-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="id-modal-title"></h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" id="id-modal-body">
                <div align="left" class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <div class="input-group">
                                <span class="input-group-addon">查询套餐名称</span>
                                <input type="text" class="input-sm form-control"
                                       id="id-package-type-name-readonly" readonly="readonly" />
                                <span class="input-group-addon">查询套餐卡数</span>
                                <input type="text" class="input-sm form-control"
                                       id="id-package-sim-num-readonly" readonly="readonly" />
                            </div>
                        </div>
                    </div>
                </div>
                <div align="left" class="row">
                    <div class="col-sm-12">
                        <div class="form-group">
                            <div class="input-group">
                                <span class="input-group-addon">查询套餐更新日期</span>
                                <input type="text" class="input-sm form-control"
                                       id="id-package-next-update-readonly" readonly="readonly" />
                            </div>
                        </div>
                    </div>
                </div>
                <div align="left" class="row">
                    <div class="col-md-12">
                        <p><i class="fa fa-info-circle"></i>
                            查询起止时间自动设置为套餐更新起止时间：begin <= t < end
                        </p>
                        <div class="form-group">
                            <div class="input-group" style="width:500px;">
                                <span class="input-group-addon">时间(GMT0)</span>
                                <span class="input-group-addon">begin</span>
                                <input type="text" class="input-sm form-control" name="start" id="input-daterange-start"/>
                                <span class="input-group-addon">end</span>
                                <input type="text" class="input-sm form-control" name="end" id="input-daterange-end"/>
                            </div>
                        </div>
                    </div>
                </div>
                <div align="left" class="row">
                    <div class="col-sm-7">
                        <p><i class="fa fa-info-circle"></i>
                            添加流量查询附加输出信息
                        </p>
                        <select data-placeholder="选择附加信息!" multiple class="chosen-select" style="width:300px;"
                                id="id-chosen-panel">
                            <option value="sim_agg">网络集名称</option>
                            <option value="last_update_time">上次套餐更新时间</option>
                            <option value="dispatch_con">分卡次数</option>
                            <option value="dispatch_once_flower">单次分卡流量</option>
                            <option value="percentage_f">流量使用率_OSS</option>
                            <option value="percentage_fs">流量使用率_SASS</option>
                        </select>
                    </div>
                </div>
                <br/>
                <div align="center" class="row">
                    <button type="button" class="btn btn-primary" id="id-package-flower-bt">
                        <i class="fa fa-search-plus">
                        查询&nbsp;
                        </i>
                    </button>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">关闭</button>
            </div>
        </div>
    </div>
</div>
<!-- Modal -->
<div class="modal fade" id="id-progress-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title" id="exampleModalLabel">请等待，数据查询中！</h3>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <br/>
                <br/>
                <div class="col-xs-12 col-sm-12 progress-container">
                    <div class="progress progress-striped active">
                        <div class="progress-bar progress-bar-success" style="width:0%"></div>
                    </div>
                </div>
                <br/>
                <br/>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block breadcrumb %}
<li class="active">
    <a href="#">
        <strong>套餐流量查询</strong>
    </a>
</li>
{% endblock %}
{% block row %}
<!-- 套餐流量查询设置区 -->
<!--筛选告警栏-1-->
<div id="id-warn-fir-layer"></div>
<div id="id-notification-fir">
    <div id="id-notification-content-fir">
    </div>
</div>
<div id="id-notification-container-fir">
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <i class="fa fa-wrench"> 1-套餐流量查询初始化设置-套餐设置 </i>
            </div>
            <div class="ibox-content">
                <div class="row">
                    <div class="col-sm-5 m-b-xs">
                        <select class="select-country" id="id-select-country" style="width:120px;">
                            <option></option>
                        </select>
                        <select class="select-org" title="org" id="id-select-org" style="width:120px;">
                            <option value="GTBU" selected="selected">GTBU</option>
                        </select>
                        <select class="form-sim-type" title="org" id="id-select-sim-type" style="width:120px;">
                            <option></option>
                        </select>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group" id="id-package-type-div">
                            <div class="input-group">
                                <span class="input-group-addon"><strong>套餐名称</strong></span>
                                <input type="text" data-toggle="tooltip" class="input-sm form-control"
                                       id="id-package-type-name"
                                       title='套餐名称支持开头模糊查询'/>
                            </div>
                        </div>
                    </div>
                    <div style="text-align:center" class="col-sm-3 m-b-xs">
                        <button id="id-get-sim-package-info" type="button"
                                class="btn btn-sm btn-primary pull-right m-t-n-xs ">
                            查询
                            <span class="glyphicon glyphicon-search" aria-hidden="true"></span>
                        </button>
                    </div>
                </div>
                <div align="center" class="row">
                    <div class="col-sm-12">
                        <div class="form-group" id="id-sim-package-status">
                            <div class="input-group">
                                <span class="input-group-addon"><strong>卡状态</strong><small>(逗号隔开不同状态)</small></span>
                                <span class="input-group-addon"><small>可用状态</small></span>
                                <input type="text" value="" data-toggle="tooltip" class="input-sm form-control"
                                       id="id-ava-status"
                                       title='支持多状态查询：0,2,4,8,16...'/>
                                <span class="input-group-addon"><small>业务状态</small></span>
                                <input type="text" value="" data-toggle="tooltip" class="input-sm form-control"
                                       id="id-business-status"
                                       title='支持多状态查询：
                                   0-卡未停用，1-卡已停用，2-卡预停用 （手工），3-流量不足，停用，
                                   4 -卡pending， 5-待测试卡（只能定向分配），6-待下架卡，7-流量封顶停用'/>
                                <span class="input-group-addon"><small>套餐状态</small></span>
                                <input type="text" value="" data-toggle="tooltip" class="input-sm form-control"
                                       id="id-package-status"
                                       title='支持多状态查询：
                                   0正常，1限速，2不可用，3套餐过期'/>
                                <span class="input-group-addon"><small>卡位状态</small></span>
                                <input type="text" value="" data-toggle="tooltip" class="input-sm form-control"
                                       id="id-slot-status"
                                       title='支持多状态查询：
                                   0未拔出，1已拔出 ,2卡槽异常'/>
                                <span class="input-group-addon"><small>bam状态</small></span>
                                <input type="text" value="" data-toggle="tooltip" class="input-sm form-control"
                                       id="id-bam-status"
                                       title='支持多状态查询：
                                   0 BAM正常，1 BAM异常'/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <i class="fa fa-table">
                    1-套餐卡状态统计表<small>(注:以下统计结果为卡状态筛选栏对应状态统计结果)</small>
                </i>
                <div class="ibox-tools">
                    <a class="collapse-link">
                        <i class="fa fa-chevron-up"></i>
                    </a>
                    <a class="close-link">
                        <i class="fa fa-times"></i>
                    </a>
                </div>
            </div>
            <div class="ibox-content">
                <table class="table table-bordered">
                    <thead>
                    <tr>
                        <th>num</th>
                        <th>套餐名称</th>
                        <th>套餐更新时间(GMT0)</th>
                        <th>卡数(对应卡状况)</th>
                        <th>流量使用率(%)</th>
                        <th>流量查询选择</th>
                    </tr>
                    </thead>
                    <tbody id="id-package-table">
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<!-- 套餐流量查询区 -2->
<!--筛选告警栏-2-->
<div id="id-warn-sec-layer"></div>
<div id="id-notification-sec">
    <div id="id-notification-content-sec">
    </div>
</div>
<div id="id-notification-container-sec">
</div>
<div class="row">
    <div class="col-lg-12">
        <div class="ibox float-e-margins">
            <div class="ibox-title">
                <i class="fa fa-table">
                    2-套餐流量查询详情表
                </i>
                <div class="ibox-tools">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-wrench"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        <li align="center"><small><strong>表格显示设置</strong></small></li>
                        <br/>
                        <li align="center">
                            <div id='jqxDropDownList'></div>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</div>
<div align="center" class="row">
    <div data-toggle="buttons" class="btn-group">
        <button id="package-flower-flash" type="button" class="btn btn-sm btn-default ">
            刷新
            <span class="glyphicon glyphicon-refresh" aria-hidden="true"></span>
        </button>
        <button id="package-flower-excel-export" type="button" class="btn btn-sm btn-default ">
            导出
            <span class="glyphicon glyphicon-export" aria-hidden="true"></span>
        </button>
    </div>
</div>
<div class="table-responsive">
    <div id='id-package-flower-div'>
        <div id="id-package-flower-grid"></div>
    </div>
</div>
{% endblock %}
{% block scripts %}
{{ super() }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.3/js/select2.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-daterangepicker/2.1.25/daterangepicker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/locales/bootstrap-datepicker.zh-CN.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.18.1/moment.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.7.0/chosen.jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jasny-bootstrap/3.1.3/js/jasny-bootstrap.min.js"></script>
{% assets "jqwidgets_globle_js" %}
<script src="{{ ASSET_URL }}" type="text/javascript"></script>
{% endassets %}
{% assets "packageFlowerQuery_js" %}
<script src="{{ ASSET_URL }}" type="text/javascript"></script>
{% endassets %}
{% endblock %}